<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en-us" lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2005"/>
<meta name="DC.rights.owner" content="(C) Copyright 2005"/>
<meta name="DC.Type" content="reference"/>
<meta name="DC.Title" content="Protocol (client) selection"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="spldoc_page"/>
<link rel="stylesheet" type="text/css" href="../../html/commonltr.css"/>
<link rel="stylesheet" type="text/css" href="../../html/spldoc.css"/>
<title>Protocol (client) selection</title>
</head>
<body id="spldoc_page">


<h1 class="title topictitle1">Protocol (client) selection</h1>

<div class="body refbody">
<div class="section">
<p class="p">
<a class="xref" href="../toolkits/toolkits.html">IBMStreams com.ibm.streamsx.objectstorage Toolkit</a> &gt; <a class="xref" href="tk$com.ibm.streamsx.objectstorage.html">com.ibm.streamsx.objectstorage 2.1.8</a> &gt; Protocol (client) selection</p>

</div>


<div class="section">
<p class="p"><br/><img class="image" src="../../image/copy/1$SinkLayers.png" alt=""/><br/>
</p>

<div class="p">The diagram represents represents two different clients which are utilized by the toolkit:
<ul class="ul">
<li class="li"> hadoop-aws (s3a protocol)</li>

<li class="li"> stocator (cos protocol)</li>

</ul>

</div>

<p class="p">You may easily select one of the two S3 clients by specifying appropriate protocol in the <tt class="ph tt">objectStorageURI</tt>Â parameter. The URI should be in <tt class="ph tt">cos://bucket/</tt> or <tt class="ph tt">s3a://bucket/</tt> format. Replace bucket with the name of the bucket you created. Concretely, when <strong class="ph b">s3a</strong> protocol is specified the toolkit uses <em class="ph i">hadoop-aws</em> client. When <strong class="ph b">cos</strong> protocol is specified the toolkit uses <em class="ph i">stocator</em> client.
</p>

<p class="p">Note: The S3ObjectStorageSink, S3ObjectStorageSource and S3ObjectStorageScan operators have a <tt class="ph tt">protocol</tt> parameter for the client selection and a <tt class="ph tt">bucket</tt> parameter to specify the name of the bucket.
</p>

<p class="p">For ObjectStorageScan and ObjectStorageSource operator there is no big difference regarding the S3 client and you can select any of both clients. The ObjectStorageSink works different depending on the client selection.
</p>

<p class="p">Recommendation for client selection when writing objects in raw or parquet format:
</p>

<div class="p">
<ul class="ul">
<li class="li"> Your application creates large objects one after another, then select s3a protocol, because large objects are uploaded in multiple parts in parallel.</li>

<li class="li"> Your application creates many objects within a narrow time frame, then select cos protocol, because multiple threads are uploading the entire object per thread in parallel.</li>

</ul>

</div>

<p class="p">When writing objects in <em class="ph i">partitioned parquet</em> format both clients work similar and you may select one of the clients because of the different buffering mechanism:
</p>

<div class="p">
<ul class="ul">
<li class="li"> hadoop-aws (s3a protocol): supports buffering in memory or disk (parameter <tt class="ph tt">s3aFastUploadBuffer</tt>) - <strong class="ph b">default</strong>: <strong class="ph b">memory buffer</strong> prior upload</li>

<li class="li"> stocator (cos protocol): buffers on local disk prior upload</li>

</ul>

</div>

</div>

</div>


</body>
</html>