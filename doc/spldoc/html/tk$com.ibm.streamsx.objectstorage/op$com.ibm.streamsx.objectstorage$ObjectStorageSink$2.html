<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en-us" lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2005"/>
<meta name="DC.rights.owner" content="(C) Copyright 2005"/>
<meta name="DC.Type" content="reference"/>
<meta name="DC.Title" content="Supported Storage Formats"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="spldoc_page"/>
<link rel="stylesheet" type="text/css" href="../../html/commonltr.css"/>
<link rel="stylesheet" type="text/css" href="../../html/spldoc.css"/>
<title>Supported Storage Formats</title>
</head>
<body id="spldoc_page">


<h1 class="title topictitle1">Supported Storage Formats</h1>

<div class="body refbody">
<div class="section">
<p class="p">
<a class="xref" href="../toolkits/toolkits.html">IBMStreams com.ibm.streamsx.objectstorage Toolkit</a> &gt; <a class="xref" href="tk$com.ibm.streamsx.objectstorage.html">com.ibm.streamsx.objectstorage 1.4.1</a> &gt; <a class="xref" href="ns$com.ibm.streamsx.objectstorage.html">com.ibm.streamsx.objectstorage</a> &gt; <a class="xref" href="op$com.ibm.streamsx.objectstorage$ObjectStorageSink.html">ObjectStorageSink</a> &gt; Supported Storage Formats</p>

</div>


<div class="section">
<p class="p">The operator support two storage formats:
</p>

<div class="p">
<ul class="ul">
<li class="li"> <tt class="ph tt">parquet</tt> - when output object is generated in parquet format</li>

<li class="li">
<p class="p"> <tt class="ph tt">raw</tt> - when output object is generated in the raw format
</p>
</li>

</ul>

</div>

<p class="p">The storage format can be configured with the <tt class="ph tt">storageFormat</tt> parameter.
</p>

<p class="p">The <tt class="ph tt">storageFormat</tt> parameter supports two values: <tt class="ph tt">parquet</tt> and <tt class="ph tt">raw</tt>.
</p>

</div>

<div class="section"><h2 class="title sectiontitle">Parquet Storage Format
</h2>

<p class="p">Parquet output schema is derived from the tuple structure. Note, that parquet format is supported  for tuples with the flat SPL schema only.
</p>

<p class="p">The following table summarizes primitive SPL to Parquet types mapping:
</p>

<div class="p">

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all">


<thead class="thead" align="left">
<tr class="row">
<th class="entry" colspan="1" align="left" valign="top" id="d9419e101">
<p class="p">SPL Type
</p>

</th>

<th class="entry" colspan="1" align="center" valign="top" id="d9419e107">
<p class="p">Parquet Type
</p>

</th>

</tr>

</thead>

<tbody class="tbody">
<tr class="row">
<td class="entry" colspan="1" align="left" valign="top" headers="d9419e101 ">
<p class="p">BOOLEAN
</p>

</td>

<td class="entry" colspan="1" align="center" valign="top" headers="d9419e107 ">
<p class="p">boolean
</p>

</td>

</tr>

<tr class="row">
<td class="entry" colspan="1" align="left" valign="top" headers="d9419e101 ">
<p class="p">INT8, UINT8, INT16, UINT16, INT32, UINT32
</p>

</td>

<td class="entry" colspan="1" align="center" valign="top" headers="d9419e107 ">
<p class="p">int32
</p>

</td>

</tr>

<tr class="row">
<td class="entry" colspan="1" align="left" valign="top" headers="d9419e101 ">
<p class="p">INT64, UINT64
</p>

</td>

<td class="entry" colspan="1" align="center" valign="top" headers="d9419e107 ">
<p class="p">int64
</p>

</td>

</tr>

<tr class="row">
<td class="entry" colspan="1" align="left" valign="top" headers="d9419e101 ">
<p class="p">FLOAT32
</p>

</td>

<td class="entry" colspan="1" align="center" valign="top" headers="d9419e107 ">
<p class="p">float
</p>

</td>

</tr>

<tr class="row">
<td class="entry" colspan="1" align="left" valign="top" headers="d9419e101 ">
<p class="p">FLOAT64
</p>

</td>

<td class="entry" colspan="1" align="center" valign="top" headers="d9419e107 ">
<p class="p">double
</p>

</td>

</tr>

<tr class="row">
<td class="entry" colspan="1" align="left" valign="top" headers="d9419e101 ">
<p class="p">RSTRING, USTRING, BLOB
</p>

</td>

<td class="entry" colspan="1" align="center" valign="top" headers="d9419e107 ">
<p class="p">binary
</p>

</td>

</tr>

<tr class="row">
<td class="entry" colspan="1" align="left" valign="top" headers="d9419e101 ">
<p class="p">TIMESTAMP
</p>

</td>

<td class="entry" colspan="1" align="center" valign="top" headers="d9419e107 ">
<p class="p">int64
</p>

</td>

</tr>

<tr class="row">
<td class="entry" colspan="1" align="left" valign="top" headers="d9419e101 ">
<p class="p">ALL OTHER SPL PRIMITIVE TYPES
</p>

</td>

<td class="entry" colspan="1" align="center" valign="top" headers="d9419e107 ">
<p class="p">binary
</p>

</td>

</tr>

</tbody>

</table>
</div>

</div>

<p class="p">The following table summarizes collection SPL to Parquet types mapping:
</p>

<div class="p">

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all">


<thead class="thead" align="left">
<tr class="row">
<th class="entry" colspan="1" align="center" valign="top" id="d9419e260">
<p class="p">SPL Type
</p>

</th>

<th class="entry" colspan="1" align="center" valign="top" id="d9419e266">
<p class="p">Parquet Type
</p>

</th>

</tr>

</thead>

<tbody class="tbody">
<tr class="row">
<td class="entry" colspan="1" align="center" valign="top" headers="d9419e260 ">
<p class="p">LIST, SET
</p>

</td>

<td class="entry" colspan="1" align="left" valign="top" headers="d9419e266 ">
<p class="p">optional group my_list (LIST) (repeated group of list/set elements)
</p>

</td>

</tr>

<tr class="row">
<td class="entry" colspan="1" align="center" valign="top" headers="d9419e260 ">
<p class="p">MAP
</p>

</td>

<td class="entry" colspan="1" align="left" valign="top" headers="d9419e266 ">
<p class="p">repeated group of key/value
</p>

</td>

</tr>

</tbody>

</table>
</div>

</div>

<p class="p">Parameters relevant for <tt class="ph tt">parquet</tt> storage format
</p>

<div class="p">
<ul class="ul">
<li class="li"> <tt class="ph tt">nullPartitionDefaultValue</tt> - Specifies default for partitions with null values.</li>

<li class="li">
<p class="p"> <tt class="ph tt">parquetBlockSize</tt> - Specifies the block size which is the size of a row group being buffered in memory. The default is 128M.
</p>
</li>

<li class="li">
<p class="p"> <tt class="ph tt">parquetCompression</tt> - Enum specifying support compressions for parquet storage format. Supported compression types are 'UNCOMPRESSED','SNAPPY','GZIP'
</p>
</li>

<li class="li">
<p class="p"> <tt class="ph tt">parquetDictPageSize</tt> - There is one dictionary page per column per row group when dictionary encoding is used. The dictionary page size works like the page size but for dictionary.
</p>
</li>

<li class="li">
<p class="p"> <tt class="ph tt">parquetEnableDict</tt> - Specifies if parquet dictionary should be enabled.
</p>
</li>

<li class="li">
<p class="p"> <tt class="ph tt">parquetEnableSchemaValidation</tt> - Specifies of schema validation should be enabled.
</p>
</li>

<li class="li">
<p class="p"> <tt class="ph tt">parquetPageSize</tt> - Specifies the page size is for compression. A block is composed of pages. The page is the smallest unit that must be read fully to access a single record. If this value is too small, the compression will deteriorate. The default is 1M.
</p>
</li>

<li class="li">
<p class="p"> <tt class="ph tt">parquetWriterVersion</tt> - Specifies parquet writer version. Supported versions are <tt class="ph tt">1.0</tt> and <tt class="ph tt">2.0</tt>
</p>
</li>

<li class="li">
<p class="p"> <tt class="ph tt">skipPartitionAttributes</tt> - Avoids writing of attributes used as partition columns in data files.
</p>
</li>

<li class="li">
<p class="p"> <tt class="ph tt">partitionValueAttributes</tt> - Specifies the list of attributes to be used for partition column values. Please note,that its strongly recommended not to use attributes with continuous values per rolling policy unit of measureto avoid operator performance degradation. The following examples demonstrates recommended and non-recommended partitioning approaches.<strong class="ph b">Recommended</strong>: /YEAR=YYYY/MONTH=MM/DAY=DD/HOUR=HH <strong class="ph b">Non-recommended</strong>: /latutide=DD.DDDD/longitude=DD.DDDD/
</p>
</li>

</ul>

</div>

<p class="p"><strong class="ph b">Parquet storage format - preferred practices for partitions design</strong>
</p>

<div class="p">
<ol class="ol">
<li class="li"> Think about what kind of queries you will need. For example, you might need to build monthly reports or sales by product line.</li>

<li class="li">
<p class="p"> Do not partition on an attribute with high cardinality per rolling policy window that you end up with too many simultaneouslyactive partitions. Reducing the number of  simultaneously active partitions can greatly improve performance and operator's resource consumption.
</p>
</li>

<li class="li">
<p class="p"> Do not partition on attribute with high cardinality per rolling policy window so you end up with many small-sized objects.
</p>
</li>

</ol>

</div>

</div>

<div class="section"><h2 class="title sectiontitle">Raw Storage Format
</h2>

<p class="p">If the input tuple schema for the <tt class="ph tt">raw</tt> storage format has more than one input attribute the operators expect <tt class="ph tt">dataAttribute</tt> parameter to be specified. The attribute specified as <tt class="ph tt">dataAttribute</tt> value should be of <tt class="ph tt">rstring</tt> or <tt class="ph tt">blob</tt> type.
</p>

<p class="p">Parameters relevant for the <tt class="ph tt">raw</tt> storage format:
</p>

<div class="p">
<ul class="ul">
<li class="li"> <tt class="ph tt">dataAttribute</tt> - Required when input tuple has more than one attribute. Specifies the name of the attribute which content is about to be written to the output object. The attribute should has <tt class="ph tt">rstring</tt> or <tt class="ph tt">blob</tt> SPL type.</li>

</ul>
Mandatory parameter for the case when input tuple has more than one attribute and the storage format is set to <tt class="ph tt">raw</tt>.
</div>

<div class="p">
<ul class="ul">
<li class="li"> <tt class="ph tt">objectNameAttribute</tt> - If set, it points to the attribute containing an object name. The operator will close the object when value of this attribute changes and will open the new object with an updated name.</li>

<li class="li">
<p class="p"> <tt class="ph tt">encoding</tt> - Specifies the character encoding that is used in the output object.
</p>
</li>

<li class="li">
<p class="p"> <tt class="ph tt">headerRow</tt> - If specified the header line with the parameter content will be generated in each output object.
</p>
</li>

</ul>

</div>

</div>

</div>


</body>
</html>